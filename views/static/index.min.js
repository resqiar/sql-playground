let currentPage=1;const loadMoreBtn=document.getElementById("load-more-btn"),table=document.getElementById("item-list"),filterInputs=document.querySelectorAll("input[name^='filter_']"),inputID=document.querySelector("input[name='filter_id']"),inputName=document.querySelector("input[name='filter_name']"),inputCountry=document.querySelector("input[name='filter_countrycode']"),inputDistrict=document.querySelector("input[name='filter_district']"),filterBtn=document.getElementById("filter-btn"),clearFilterBtn=document.getElementById("clear-filter-btn");loadMoreBtn.addEventListener("click",loadMore),filterBtn.addEventListener("click",filterData),clearFilterBtn.addEventListener("click",clearFilter);for(let t=0;t<filterInputs.length;t++){filterInputs[t].addEventListener("keyup",(function(t){"Enter"===t.key&&filterData()}))}async function loadMore(){try{const t=await fetch(`/api/load-more-city?page=${currentPage+1}`);render(await t.json()),currentPage++}catch(t){console.log(t)}}function render(t,e){if(e&&(table.innerHTML="\n            <tr>\n                <th>ID</th>\n                <th>Name</th>\n                <th>CountryCode</th>\n                <th>District</th>\n                <th>Population</th>\n            </tr>\n        "),!t)return;const n=document.createDocumentFragment();for(let e=0;e<t.length;e++){const r=t[e],i=document.createElement("tr");i.innerHTML=`\n            <tr>\n                <td>${r.ID}</td>\n                <td>${r.Name}</td>\n                <td>${r.CountryCode}</td>\n                <td>${r.District}</td>\n                <td>${r.Population}</td>\n            </tr>\n        `,n.append(i)}table.append(n)}function resetPage(){currentPage=1}async function filterData(){try{const t=await fetch(`\n            /api/filter?id=${inputID.value}&name=${inputName.value}&country=${inputCountry.value}&district=${inputDistrict.value}\n        `);render(await t.json(),!0),resetPage()}catch(t){console.log(t)}}function clearFilter(){inputID.value="",inputName.value="",inputCountry.value="",inputDistrict.value="",filterData()}
